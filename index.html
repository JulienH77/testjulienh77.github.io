<!DOCTYPE html>
<html>
<head>
    <title>Test Animation Leaflet.Motion</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <!-- Version garantie de leaflet.motion -->
    <script src="https://cdn.jsdelivr.net/gh/Igor-Vladyka/leaflet.motion@master/dist/leaflet.motion.min.js"></script>
    <style>
        #map { height: 600px; margin-bottom: 10px; }
        button { margin: 5px; padding: 8px 12px; cursor: pointer; }
    </style>
</head>
<body>
    <div id="map"></div>
    <button id="testAnimation">Tester une animation simple</button>

    <script>
        // Initialisation de la carte avec OSM
        const map = L.map('map').setView([48.8566, 2.3522], 12);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Vérification du chargement de L.Motion
        window.onload = function() {
            if (typeof L.Motion === 'undefined') {
                alert("La bibliothèque leaflet.motion n'est pas chargée.");
            } else {
                console.log("L.Motion est chargé:", L.Motion);
            }
        };

        // Bouton pour tester une animation simple
        document.getElementById('testAnimation').addEventListener('click', () => {
            if (typeof L.Motion === 'undefined') {
                alert("L.Motion n'est pas disponible.");
                return;
            }

            // Coordonnées pour une ligne simple (Paris)
            const latlngs = [
                L.latLng(48.8566, 2.3522),
                L.latLng(48.8534, 2.3488),
                L.latLng(48.8584, 2.2945),
                L.latLng(48.8589, 2.3472)
            ];

            // Création et démarrage de l'animation avec L.Motion.Polyline
            try {
                const motion = new L.Motion.Polyline(
                    latlngs,
                    { color: "#FF0000" },
                    { duration: 5000, easing: L.Motion.Ease.linear }
                ).addTo(map);
                motion.start();
                console.log("Animation démarrée avec succès !");
            } catch (e) {
                console.error("Erreur lors du démarrage de l'animation:", e);
                alert("Erreur lors du démarrage de l'animation. Voir la console pour plus de détails.");
            }
        });
    </script>
</body>
</html>
